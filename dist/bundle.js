!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(1),c=n.n(r);const i=/^.{0,15}\[.*eng?\.*].*$/i,s=e=>new Promise(t=>setTimeout(t,e)),l=(...e)=>{console.log(...e)},u=(...e)=>{console.warn(...e)},d=async(e,t=window)=>{for(;;){const n=t.document.querySelector(e);if(n)return l("whenAvailable: Found selector",e),n;u("whenAvailable: Could not find selector",e),await s(1e3)}},f=[],m=[];let g,h;async function p(){l("onPageChange: Init");const e=g.hasAttribute("is-watch-page");if(e){const e=await d("#chatframe"),t=await d("#item-offset",e.contentWindow);l("onPageChange: Setting chat observer"),h=new MutationObserver(b),h.observe(t,{childList:!0,subtree:!0})}else l("onPageChange: Disconnecting chat observer"),h&&h.disconnect(),l("onPageChange: Removing translation container");!function(e){for(const t of m)t(e)}(e)}function b(e){for(const t of e){if("childList"!==t.type)continue;const e=[...t.addedNodes].filter(e=>e.nodeType===Node.ELEMENT_NODE).filter(e=>e.classList.contains("yt-live-chat-item-list-renderer"));if(0!==e.length){l("onChatChange: New messages ",e.length);for(const t of e)v(t)}}}function v(e){const t=e.querySelector("#message");if(!t)return void u("onMessage: Could not find message within chatElem",e);const n=t.textContent;if(!i.test(n))return;const o=e.querySelector("#author-name"),a=o?o.textContent:"???";l("onMessage: Matched text",n),function(e){for(const t of f)t(e)}({text:n,author:a})}const y=a.a.createElement;var w=({...e})=>y("svg",{id:"translate_live_button",viewBox:"0 0 20 20",width:"20",height:"20",className:"adjustments w-6 h-6",style:{verticalAlign:"middle",marginLeft:"7px"},...e},y("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 2a1 1 0 011 1v1h3a1 1 0 110 2H9.578a18.87 18.87 0 01-1.724 4.78c.29.354.596.696.914 1.026a1 1 0 11-1.44 1.389c-.188-.196-.373-.396-.554-.6a19.098 19.098 0 01-3.107 3.567 1 1 0 01-1.334-1.49 17.087 17.087 0 003.13-3.733 18.992 18.992 0 01-1.487-2.494 1 1 0 111.79-.89c.234.47.489.928.764 1.372.417-.934.752-1.913.997-2.927H3a1 1 0 110-2h3V3a1 1 0 011-1zm6 6a1 1 0 01.894.553l2.991 5.982a.869.869 0 01.02.037l.99 1.98a1 1 0 11-1.79.895L15.383 16h-4.764l-.724 1.447a1 1 0 11-1.788-.894l.99-1.98.019-.038 2.99-5.982A1 1 0 0113 8zm-1.382 6h2.764L13 11.236 11.618 14z"}));const x=a.a.createElement;var O=({onToggleMessages:e,messagesAreShown:t})=>x(w,{onClick:e,fill:t?"red":"gray"});const C=a.a.createElement;var E=({show:e,messages:t,bottomOfChatRef:n,forwardRef:o})=>C("div",{style:{display:e?"block":"none",fontSize:"13px",width:"100%",height:"120px",backgroundColor:"white",overflow:"hidden",overflowY:"scroll",paddingBottom:"15px",marginTop:"5px",paddingLeft:"10px",paddingRight:"10px"},ref:o},t.map((e,t)=>C("div",{key:t,style:{marginTop:"15px"}},C("b",null,e.author),"  ",e.text)),C("div",{style:{float:"left",clear:"both"},ref:n}));const S=a.a.createElement;var j=()=>{const[e,t]=Object(o.useState)(!1),[n,r]=Object(o.useState)([]),[i,s]=Object(o.useState)(null),[u,g]=Object(o.useState)(!1);Object(o.useEffect)(()=>{const e=e=>{t(e),r([])};return async function(e){m.push(e)}(e),()=>{!async function(e){const t=m.findIndex(t=>t===e);-1!==t&&delete m[t]}(e)}},[]),Object(o.useEffect)(()=>{(async()=>{if(!e)return void s(null);let t=document.getElementById("live-translate-button-container");if(!t){t=document.createElement("div"),t.id="live-translate-button-container";const e=await d("#upnext.ytd-compact-autoplay-renderer");e.style.display="flex",e.appendChild(t)}let n=document.getElementById("live-translate-msg-container");if(!n){n=document.createElement("div"),n.id="live-translate-msg-container";(await d("#info-contents")).insertAdjacentElement("afterend",n)}s({buttonContainer:t,msgContainer:n})})()},[e]),Object(o.useEffect)(()=>{const e=e=>{r(t=>[...t,e])};return async function(e){f.push(e)}(e),()=>{!async function(e){const t=f.findIndex(t=>t===e);-1!==t&&delete f[t]}(e)}},[]);const h=Object(o.useRef)(null),p=Object(o.useRef)(null);return Object(o.useEffect)(()=>{if(p.current&&h.current){const e=h.current;e.scrollHeight-e.offsetHeight-e.scrollTop<=100&&(l("scrolling bottom"),p.current.scrollIntoView({block:"end"}))}},[n]),i&&S(a.a.Fragment,null,c.a.createPortal(S(O,{onToggleMessages:()=>g(e=>!e),messagesAreShown:u}),i.buttonContainer),c.a.createPortal(S(E,{show:u,messages:n,forwardRef:h,bottomOfChatRef:p}),i.msgContainer))};const M=a.a.createElement,P=async()=>{l("main: Start"),async function(){g=await d("ytd-app"),new MutationObserver(p).observe(g,{attributes:!0,attributeFilter:["is-watch-page"]}),p()}();const e=document.createElement("div");document.body.appendChild(e),l("main: Initializing react"),c.a.render(M(j),e)};window!==window.top||("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?P():document.addEventListener("DOMContentLoaded",P))}]);